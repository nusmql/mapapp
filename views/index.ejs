<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="LeafletJs Testing" />
        <meta name="keywords" content="map leaflet" />
        <meta name="author" content="Meng" />
        <title><%= title %></title>
        <link rel='stylesheet' href='/stylesheets/style.css' />
        <link rel="stylesheet" href="/node_modules/leaflet/leaflet.css" />

        <style>
            body {
                padding: 0;
                margin: 0;
            }
            html, body, #map {
                height: 100%;
                width: 100%;
            }
        </style>

        <script src="/node_modules/leaflet/leaflet.js"></script>
        <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise"></script>
        <script src="/node_modules/leaflet-bing-layer/leaflet-bing-layer.js"></script>
        <script src="/static/javascripts/mousePosition/L.Control.MousePosition.js"></script>
        <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
    </head>
    <body>
        <div id="map">
        </div>
        <script>
            // initialize the map one the map div with given center and zoom
            const map = L.map('map').setView([1.27511, 103.79846], 12)

            const gMap = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
                maxZoom: 19,
                subdomains:['mt0','mt1','mt2','mt3']
            })

            const bingmap = L.tileLayer.bing({
                imagerySet: 'Road',
                bingMapsKey: 'As2dRWl4EwepwvBD7gE3_NQWGfa3noo3kSMkX-a09MhV7wjxYo-rAAf_aQISREg8'
            })

            gMap.addTo(map);

            const baseMap = {
                "Google Map": gMap,
                "Bing Map": bingmap
            }

            const layerControl = L.control.layers(baseMap).addTo(map);

            L.control.mousePosition({
                position: "bottomright",
                //emptyString: "",
                emptyString: '0ยบ N<br>0ยบ E',
                separator: '<br>',
                lngFormatter: function(num) {
                  var direction = (num < 0) ? 'W' : 'E';
                  var formatted = Math.abs(L.Util.formatNum(num, 3)) + 'ยบ ' + direction;
                  return formatted;
                },
                latFormatter: function(num) {
                  var direction = (num < 0) ? 'S' : 'N';
                  var formatted = Math.abs(L.Util.formatNum(num, 3)) + 'ยบ ' + direction;
                  return formatted;
                },
                lngFirst: !1,
                numDigits: 5
            }).addTo(map);

            // L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw', {
            //     maxZoom: 18,
            //     attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
            //     '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
            //     'Imagery © <a href="http://mapbox.com">Mapbox</a>',
            //     id: 'mapbox.streets'
            // }).addTo(map);

            // var marker = L.marker([1.27511, 103.7]).addTo(map);

            // var circle = L.circle([1.27511, 103.75], {
            //     color: 'red',
            //     fillColor: '#f03',
            //     fillOpacity: 0.5,
            //     radius: 500
            // }).addTo(map);

            // var polygon = L.polygon([
            //     [1.273, 103.71],
            //     [1.2626, 103.729],
            //     [1.279, 103.739]
            // ]).addTo(map);


            // marker.bindPopup("<b>Hello world!</b><br> I am a popup.").openPopup();
            // circle.bindPopup("I am a circle.");

            // var popup = L.popup();
            // function onMapClick(e) {
            //     popup
            //         .setLatLng(e.latlng)
            //         .setContent("You clicked the map at " + e.latlng.toString())
            //         .openOn(map);
            // }

            // map.on('click', onMapClick);
        </script>
    </body>
</html>
